<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TerrSet Download Counts</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        .asset {
            margin: 20px;
        }
        .asset h2 {
            font-size: 1.5em;
            color: #34495e;
        }
        .asset span {
            font-size: 2em;
            color: #2c3e50;
        }
    </style>
    <title>HTML Table</title>
    <style>
        table {
            width: 50%;
            border-collapse: collapse;
            margin: 20px auto;
        }
        th, td {
            border: 1px solid #000;
            text-align: center;
            padding: 10px;
        }
        th {
            font-weight: bold;
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <h1>TerrSet liberaGIS Release Download Counts</h1>
        <table>
            <tr>
                <th>v20.02 Setup</th>
                <th>v20.02 ADBE</th>
                <th>v20.01 Setup</th>
                <th>v20.01 ADBE</th>
                <th>v20.00 Setup</th>
                <th>v20.00 ADBE</th>
            </tr>
            <tr>
                <td><span id="count-v2002-setup">Loading...</span></td>
                <td><span id="count-v2002-access">Loading...</span></td>
                <td><span id="count-v2001-setup">Loading...</span></td>
                <td><span id="count-v2001-access">Loading...</span></td>
                <td><span id="count-v2000-setup">Loading...</span></td>
                <td><span id="count-v2000-access">Loading...</span></td>
            </tr>
        </table>

    <div class="line">
        <hr>
    </div>

    <h1>TerrSet 2020 Release Download Counts</h1>
    <table>
        <tr>
            <th>v19.08 Setup</th>
            <th>v19.08 ADBE</th>
        </tr>
        <tr>
            <td><span id="count-t2020-setup">Loading...</span></td>
            <td><span id="count-t2020-access">Loading...</span></td>
        </tr>
    </table>

    <div class="line">
        <hr>
    </div>

    <h1>TerrSet v18.31 Release Download Counts</h1>
    <table>
        <tr>
            <th>v18.31 Setup</th>
            <th>v18.31 ADBE</th>
        </tr>
        <tr>
            <td><span id="count-v18-setup">Loading...</span></td>
            <td><span id="count-v18-access">Loading...</span></td>
        </tr>
    </table>


    
    <script>
        async function fetchDownloadCounts() {
            const apiUrl = "https://api.github.com/repos/ClarkCGA/TerrSet/releases";

            try {
                const response = await fetch(apiUrl);
                if (!response.ok) throw new Error(`Error: ${response.status}`);
                
                const releases = await response.json();
                if (releases.length === 0) throw new Error("No releases found.");

                // The latest release is the liberaGIS v20.02
                const v2002Release = releases[0]; 
                const v2002Assets = v2002Release.assets;

                const v2002SetupAsset = v2002Assets.find(asset => asset.name === "setup_TerrSet_liberaGIS_v20_02.exe");
                const v2002AccessAsset = v2002Assets.find(asset => asset.name === "AccessDatabaseEngine.exe");

                document.getElementById("count-v2002-setup").textContent = 
                    v2002SetupAsset ? v2002SetupAsset.download_count.toLocaleString() : "Not Found";

                document.getElementById("count-v2002-access").textContent = 
                    v2002AccessAsset ? v2002AccessAsset.download_count.toLocaleString() : "Not Found";

                // The first release is the liberaGIS v20.01
                const v2001Release = releases[1]; 
                const v2001Assets = v2001Release.assets;

                // Find and display the download count for each specific asset
                const v2001SetupAsset = v2001Assets.find(asset => asset.name === "Setup_TerrSet_liberaGIS_v20_01.exe");
                const v2001AccessAsset = v2001Assets.find(asset => asset.name === "AccessDatabaseEngine.exe");

                document.getElementById("count-v2001-setup").textContent = 
                    v2001SetupAsset ? v2001SetupAsset.download_count.toLocaleString() : "Not Found";

                document.getElementById("count-v2001-access").textContent = 
                    v2001AccessAsset ? v2001AccessAsset.download_count.toLocaleString() : "Not Found";



                // The first release is the liberaGIS v20.00
                const v2000Release = releases[2]; 
                const v2000Assets = v2000Release.assets;

                // Find and display the download count for each specific asset
                const v2000SetupAsset = v2000Assets.find(asset => asset.name === "Setup_TerrSet_liberaGIS_v20_00.exe");
                const v2000AccessAsset = v2000Assets.find(asset => asset.name === "AccessDatabaseEngine.exe");

                document.getElementById("count-v2000-setup").textContent = 
                    v2000SetupAsset ? v2000SetupAsset.download_count.toLocaleString() : "Not Found";

                document.getElementById("count-v2000-access").textContent = 
                    v2000AccessAsset ? v2000AccessAsset.download_count.toLocaleString() : "Not Found";

                
                // The second release is the TerrSet2020
                const t2020Release = releases[3]; 
                const t2020assets = t2020Release.assets;

                // Find and display the download count for each specific asset
                const t2020SetupAsset = t2020assets.find(asset => asset.name === "Setup_TerrSet_2020_v19_08.exe");
                const t2020AccessAsset = t2020assets.find(asset => asset.name === "AccessDatabaseEngine.exe");

                document.getElementById("count-t2020-setup").textContent = 
                    t2020SetupAsset ? t2020SetupAsset.download_count.toLocaleString() : "Not Found";

                document.getElementById("count-t2020-access").textContent = 
                    t2020AccessAsset ? t2020AccessAsset.download_count.toLocaleString() : "Not Found";

                
                // The third release is the TerrSet v18
                const v18Release = releases[4]; 
                const v18assets = v18Release.assets;

                // Find and display the download count for each specific asset
                const v18SetupAsset = v18assets.find(asset => asset.name === "Setup_TerrSet_v18_31.exe");
                const v18AccessAsset = v18assets.find(asset => asset.name === "AccessDatabaseEngine.exe");

                document.getElementById("count-v18-setup").textContent = 
                    v18SetupAsset ? v18SetupAsset.download_count.toLocaleString() : "Not Found";

                document.getElementById("count-v18-access").textContent = 
                    v18AccessAsset ? v18AccessAsset.download_count.toLocaleString() : "Not Found";
            } 
            catch (error) {
                document.getElementById("count-v2002-setup").textContent = `Error: ${error.message}`;
                document.getElementById("count-v2002-access").textContent = `Error: ${error.message}`;
                document.getElementById("count-v2001-setup").textContent = `Error: ${error.message}`;
                document.getElementById("count-v2001-access").textContent = `Error: ${error.message}`;
                document.getElementById("count-v2000-setup").textContent = `Error: ${error.message}`;
                document.getElementById("count-v2000-access").textContent = `Error: ${error.message}`;
                document.getElementById("count-t2020-setup").textContent = `Error: ${error.message}`;
                document.getElementById("count-t2020-access").textContent = `Error: ${error.message}`;
                document.getElementById("count-v18-setup").textContent = `Error: ${error.message}`;
                document.getElementById("count-v18-access").textContent = `Error: ${error.message}`;
            }
        }

        fetchDownloadCounts();
    </script>
</body>
</html>